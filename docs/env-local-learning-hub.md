# چرا API key از .env.local خوانده نمی‌شود؟

Next.js فقط فایل **`.env.local`** را از **همان پوشه‌ای** که `npm run dev` را از آن اجرا می‌کنی لود می‌کند (معمولاً روت پروژه، جایی که `package.json` و `next.config.mjs` هستند).

## ۱. محل درست فایل

- فایل باید **دقیقاً** اینجا باشد: **`d:\z-hr-master\.env.local`**  
  (همان پوشه‌ای که `package.json` و `next.config.mjs` در آن است.)
- اگر از داخل پوشهٔ دیگری (مثلاً `test\z-hr` یا `free-nextjs-admin-dashboard`) سرور را اجرا می‌کنی، آن اپ `.env.local` خودش را از همان پوشه می‌خواند، نه از روت اصلی.

## ۲. فرمت درست متغیر

در `.env.local` باید دقیقاً این شکل را داشته باشد:

```env
RAPIDAPI_KEY=4a80ec6662mshb9efb6002d47b6bp17d832jsnc8b5702be561
```

- نام متغیر **دقیقاً** `RAPIDAPI_KEY` باشد (حروف بزرگ، بدون فاصله).
- بین نام و مقدار **`=`** بگذار و **فاصله نگذار**: `RAPIDAPI_KEY=مقدار`
- معمولاً نیازی به گیومه دور مقدار نیست (مگر خود مقدار فاصله داشته باشد).

## ۳. ریستارت سرور

بعد از هر تغییر در `.env.local` حتماً:

1. سرور را متوقف کن (Ctrl+C).
2. دوباره اجرا کن: `npm run dev`.

تا ریستارت نکنی، مقدار جدید env لود نمی‌شود.

## ۴. چک کردن اینکه کلید لود شده یا نه

در مرورگر این آدرس را باز کن (در حالی که اپ اصلی روی پورت ۳۰۰۰ در حال اجراست):

**http://localhost:3000/api/learning-hub/status**

- اگر `hasRapidApiKey: true` بود یعنی `RAPIDAPI_KEY` از `.env.local` خوانده شده.
- اگر `hasRapidApiKey: false` بود یعنی یا فایل در مسیر درست نیست، یا نام متغیر اشتباه است، یا سرور را بعد از تغییر env ریستارت نکردی.

## ۵. درخواست Sync از کجا اجرا می‌شود؟

وقتی در **پنل ادمین** دکمه «Sync Learning Hub courses» را می‌زنی، درخواست به **همان اپ اصلی** (مثلاً `http://localhost:3000`) می‌رود. پس:

- اپ اصلی (همان که با `npm run dev` از روت پروژه اجرا شده) باید روشن باشد.
- **همان** اپ است که `.env.local` را از **روت پروژه** (`d:\z-hr-master`) می‌خواند.

پس `.env.local` باید در **روت همان پروژه‌ای** باشد که سرور را از آن اجرا می‌کنی (معمولاً `d:\z-hr-master`).
